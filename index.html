<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>El Guardi√°n de la Gravedad</title>
  <meta name="description" content="El Guardi√°n de la Gravedad ‚Äî historieta y comisiones de Mateo Castellano." />

  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Preload hero illustration for faster above-the-fold render -->
  <link rel="preload" as="image" href="Ilustraci√≥n El Guardian WEB.webp" imagesrcset="Ilustraci√≥n El Guardian WEB.webp 1x" imagesizes="85vw">

  <style>
    /* RESET */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      font-family:'Roboto Condensed',sans-serif;
      background:#02060c;
      color:#cfdde7;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* BACKGROUND ILLU */
    body::before{
      content:"";
      position:fixed;inset:0;
      background-image:url("Ilustraci√≥n El Guardian WEB.webp");
      background-repeat:no-repeat;
      background-position:center;
      background-size:85vw auto;
      opacity:0.18;
      z-index:-1;
      pointer-events:none;
    }

    /* TOP NAV */
    .top-nav{
      position:fixed;top:0;left:0;width:100%;z-index:1100;
      background:rgba(8,18,32,0.65);backdrop-filter:blur(4px);
      border-bottom:1px solid rgba(110,168,161,0.18);
      transition:transform .25s ease;
    }
    .top-nav.hidden{transform:translateY(-100%)}
    .top-nav ul{list-style:none;display:flex;justify-content:center;gap:34px;padding:16px 18px}
    .top-nav a{
      color:#b8d6e8;text-decoration:none;font-size:.85rem;
      letter-spacing:2px;text-transform:uppercase;display:inline-block;
      padding:6px 4px;position:relative;
    }
    .top-nav a:focus,.top-nav a:hover{color:#e3f4ff}

    /* HERO */
    header{min-height:100vh;padding-top:70px;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at top,#0f1e2e,#06090f);position:relative;overflow:hidden}
    .guardian-img{position:absolute;top:56%;left:50%;transform:translate(-50%,-50%);width:85vw;max-width:900px;opacity:.18;z-index:1;pointer-events:none}
    .hero{position:relative;z-index:2;text-align:center;max-width:980px;padding:20px}

    h1{font-size:3.8rem;letter-spacing:3px;margin-bottom:14px;color:#c7e6e2;line-height:1}
    .tagline{font-size:1.15rem;color:#9bc7c0;margin-bottom:18px;letter-spacing:1.1px}

    /* WIND: more dramatic, slower */
    .wind{opacity:0;transform:translateX(-96px) skewX(-10deg);will-change:transform,opacity}
    @keyframes windIn {
      0%   { opacity:0; transform:translateX(-96px) skewX(-10deg) }
      60%  { opacity:1; transform:translateX(26px) skewX(-3deg) }
      100% { opacity:1; transform:translateX(0) skewX(0deg) }
    }
    .wind.animate{
      animation-name:windIn;
      animation-duration:1200ms; /* slower */
      animation-fill-mode:forwards;
      animation-timing-function:cubic-bezier(.22,.9,.29,1);
    }

    /* per-element delay utility (fallback) */
    .delay-1{animation-delay:0ms}
    .delay-2{animation-delay:260ms}
    .delay-3{animation-delay:520ms}
    .delay-4{animation-delay:880ms}

    /* letter-by-letter */
    .letter{display:inline-block;opacity:0;transform:translateX(-48px) skewX(-6deg)}
    @keyframes letterIn {
      0% { opacity:0; transform:translateX(-48px) skewX(-6deg) }
      70% { opacity:1; transform:translateX(10px) skewX(-2deg) }
      100% { opacity:1; transform:translateX(0) skewX(0deg) }
    }
    .letter[data-animate="true"]{
      animation-name:letterIn;
      animation-duration:1200ms;
      animation-fill-mode:forwards;
      animation-timing-function:cubic-bezier(.22,.9,.29,1);
    }

    /* COUNTDOWN */
    .count-wrap{display:flex;align-items:center;justify-content:center;gap:22px;flex-wrap:wrap;margin-top:8px}
    .count-label{font-size:1.05rem;color:#8fbfb7;letter-spacing:1px;text-transform:uppercase}
    .time-group{display:flex;gap:12px;align-items:center}
    .time-unit{display:flex;flex-direction:column;align-items:center;min-width:56px;perspective:900px}
    .time-value{
      display:flex;align-items:center;justify-content:center;
      background:rgba(8,18,32,0.58);border:1px solid rgba(143,174,199,0.14);
      padding:8px 10px;border-radius:8px;font-weight:700;color:#e6f6f5;font-variant-numeric:tabular-nums;
      width:3ch;text-align:center;line-height:1;
      transition:transform 760ms cubic-bezier(.25,.8,.25,1),opacity 520ms ease;
      backface-visibility:hidden;transform-style:preserve-3d;
    }
    .time-label{font-size:.72rem;color:#9fbfc6;margin-top:6px;letter-spacing:1px}
    .time-value.is-flipping{transform:rotateX(-18deg);opacity:.88}

    /* PANELS/SECTIONS */
    .panel{background:linear-gradient(180deg,rgba(6,10,14,0.56),rgba(6,10,14,0.44));border:1px solid rgba(110,168,161,0.08);padding:26px;border-radius:12px;backdrop-filter:blur(6px)}
    .panel-inner{max-width:1000px;margin:0 auto}
    section.lead{padding:120px 20px;text-align:center}
    .descripcion{max-width:700px;margin:0 auto;font-size:1.05rem;line-height:1.7;color:#cdd9d7}

    /* FORM (darker send button) */
    .formulario-comisiones{max-width:600px;margin:32px auto 0;text-align:left}
    .campo{margin-bottom:20px}
    .campo label{display:block;font-size:.8rem;letter-spacing:1.5px;text-transform:uppercase;color:#9fbfc6;margin-bottom:8px}
    .campo input,.campo textarea{
      width:100%;padding:12px 14px;background:rgba(8,18,32,0.5);border:1px solid rgba(143,174,199,0.12);color:#e6f6f5;font-size:1rem;border-radius:10px;outline:none;transition:box-shadow 180ms,border-color 180ms,transform 120ms;
    }
    .campo input::placeholder,.campo textarea::placeholder{color:rgba(231,245,246,0.32)}
    .campo input:focus,.campo textarea:focus{border-color:rgba(110,168,161,0.9);box-shadow:0 8px 26px rgba(20,80,72,0.06);transform:translateY(-1px)}

    .formulario-comisiones .btn{
      display:block;margin:18px 0 0;padding:12px 18px;width:100%;
      background:linear-gradient(90deg,#0f3f3b 0%,#0b2a28 100%);color:#eaf7f4;border:none;border-radius:12px;font-weight:700;letter-spacing:1px;
      box-shadow:0 12px 36px rgba(8,36,34,0.2);transition:transform 160ms ease,box-shadow 160ms ease,filter 160ms ease;
    }
    .formulario-comisiones .btn:hover,.formulario-comisiones .btn:focus{transform:translateY(-4px);box-shadow:0 18px 44px rgba(6,36,34,0.28);filter:brightness(1.04)}

    /* HERO ACTIONS: removed duplicate hero buttons; top-nav handles navigation */
    .acciones{margin-top:24px;display:flex;gap:12px;justify-content:center}
    .btn.secondary{display:inline-block;padding:12px 28px;margin:8px;border:1px solid rgba(110,168,161,0.14);color:#c7e6e2;text-decoration:none;text-transform:uppercase;font-size:.85rem;letter-spacing:2px;background:transparent;border-radius:8px;transition:transform 160ms,background 200ms}
    .btn.secondary:hover,.btn.secondary:focus{transform:translateY(-3px);background:rgba(110,168,161,0.08)}

    /* REVEAL for sections */
    .reveal{opacity:0;transform:translateY(12px);transition:opacity 600ms ease,transform 600ms ease}
    .reveal.is-visible{opacity:1;transform:none}

    .visually-hidden{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}
    .bitacora{padding:80px 20px;max-width:1000px;margin:0 auto}
    .bitacora-titulo{text-align:center;font-size:2rem;color:#c7e6e2;margin-bottom:20px}
    .entrada{max-width:680px;margin:0 auto 30px;border-left:1px solid rgba(143,174,199,0.14);padding-left:20px}
    .fecha{display:block;font-size:.75rem;color:#8faec7;margin-bottom:10px}

    @media (max-width:768px){
      h1{font-size:2.3rem}
      .guardian-img{width:560px;top:42%}
      .tagline{font-size:.95rem}
      .tagline-line{display:block;margin-bottom:8px}
      .tagline-line:last-child{margin-bottom:0}
      .time-unit{min-width:48px}
      .time-value{padding:6px 8px}
      .top-nav ul{gap:12px;padding:12px 8px}
      .panel{padding:18px}
      .acciones{flex-direction:column}
    }

    /* EPIC BACKGROUND ANIMATION (applies to body::before when activated) */
    @keyframes epicBg {
      0%   { transform:translateY(0) scale(1) rotate(0deg); opacity:0.18; filter:brightness(1) saturate(.98); }
      30%  { transform:translateY(-4vh) scale(1.04) rotate(-0.25deg); opacity:0.26; filter:brightness(1.08) saturate(1.06); }
      65%  { transform:translateY(-6vh) scale(1.08) rotate(-0.6deg); opacity:0.34; filter:brightness(1.12) saturate(1.12); }
      100% { transform:translateY(0) scale(1) rotate(0deg); opacity:0.18; filter:brightness(1) saturate(.98); }
    }
    body.bg-epic::before{
      animation-name:epicBg;
      animation-duration:6400ms;
      animation-timing-function:cubic-bezier(.22,.9,.29,1);
      animation-fill-mode:forwards;
      animation-iteration-count:1;
      will-change:transform,opacity,filter;
    }

    /* New epic animation for the guardian image (distinct from body epicBg) */
    @keyframes epicImg {
      0%   { transform:translate(-50%,-50%) translateY(6vh) scale(.96) rotate(0deg); opacity:0.06; filter:brightness(.9) saturate(.9); }
      25%  { transform:translate(-50%,-50%) translateY(-2vh) scale(1.06) rotate(-0.3deg); opacity:0.28; filter:brightness(1.08) saturate(1.04); }
      60%  { transform:translate(-50%,-50%) translateY(-5vh) scale(1.12) rotate(-0.8deg); opacity:0.42; filter:brightness(1.14) saturate(1.12); }
      100% { transform:translate(-50%,-50%) translateY(0) scale(1) rotate(0deg); opacity:0.18; filter:brightness(1) saturate(.98); }
    }

    /* Apply epic image animation when .img-epic is present */
    .guardian-img.img-epic{
      animation-name:epicImg;
      animation-duration:6400ms;
      animation-timing-function:cubic-bezier(.22,.9,.29,1);
      animation-fill-mode:forwards;
      animation-iteration-count:1;
      will-change:transform,opacity,filter;
    }

    /* Reset / control button */
    .bg-reset-btn{
      position:fixed;right:18px;bottom:18px;z-index:1200;border-radius:12px;padding:10px 14px;background:linear-gradient(90deg,#0f3f3b,#0b2a28);color:#eaf7f4;border:1px solid rgba(110,168,161,0.12);box-shadow:0 10px 30px rgba(6,36,34,0.22);cursor:pointer;font-weight:700;font-size:.9rem;backdrop-filter:blur(4px);
      opacity:0;
      visibility:hidden;
      transition:opacity 420ms ease,visibility 420ms ease,transform 160ms ease;
    }
    .bg-reset-btn.show{
      opacity:1;
      visibility:visible;
    }
    .bg-reset-btn:hover{transform:translateY(-2px)}
    .bg-reset-btn:active{transform:translateY(1px)}

    /* Mute button */
    .mute-btn{
      position:fixed;right:18px;bottom:18px;z-index:1200;border-radius:50%;width:48px;height:48px;background:linear-gradient(90deg,#0f3f3b,#0b2a28);color:#eaf7f4;border:1px solid rgba(110,168,161,0.12);box-shadow:0 10px 30px rgba(6,36,34,0.22);cursor:pointer;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;font-size:1.3rem;
      opacity:1;
      visibility:visible;
      transition:bottom 420ms ease,transform 160ms ease;
    }
    .mute-btn.moved-up{
      bottom:80px;
    }
    .mute-btn:hover{transform:translateY(-2px) scale(1.05)}
    .mute-btn:active{transform:translateY(1px)}
    .mute-btn.muted{opacity:0.5}
    /* --- Character grid + modal styles --- */
    .characters-section{padding:28px 14px 44px}
    .characters-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;max-width:980px;margin:22px auto 6px}
    .char-card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(143,174,199,0.06);padding:8px;border-radius:12px;display:flex;flex-direction:column;gap:8px;cursor:pointer;transition:transform 220ms cubic-bezier(.22,.9,.29,1),box-shadow 220ms;overflow:hidden}
    .char-card:focus,.char-card:hover{transform:translateY(-6px);box-shadow:0 18px 36px rgba(6,36,34,0.22)}
    .thumb-wrap{position:relative;border-radius:8px;overflow:hidden}
      .char-thumb{width:100%;height:360px;object-fit:cover;object-position:top center;background:#071015;transition:transform 320ms cubic-bezier(.22,.9,.29,1);display:block;transform-origin:top center;transform:scale(1.25) translateY(-8%);}
      .char-card:hover .char-thumb,.char-card:focus .char-thumb{transform:scale(1.42) translateY(-12%);}
      /* Shift top further for specific thumb (e.g. BOB.webp / mariner) */
        .char-thumb.shift-top{transform:scale(1.28) translateY(-6%);} /* lowered further */
        .char-card:hover .char-thumb.shift-top,.char-card:focus .char-thumb.shift-top{transform:scale(1.44) translateY(-10%);} /* hover adjusted */
    .char-overlay{position:absolute;left:10px;top:10px;padding:6px 10px;border-radius:8px;background:linear-gradient(90deg,rgba(0,0,0,0.55),rgba(6,10,14,0.45));color:#e6f6f5;font-weight:700;letter-spacing:0.6px;opacity:0;transform:translateY(-6px);transition:opacity 260ms,transform 260ms}
    .char-card:hover .char-overlay,.char-card:focus .char-overlay{opacity:1;transform:none}
    .char-meta{display:flex;justify-content:center;align-items:center;text-align:center}
    .char-name{font-weight:700;color:#e6f6f5;display:block;width:100%;text-align:center}
    .char-role{font-size:.9rem;color:#9fbfc6;display:block;width:100%;text-align:center}

    /* Modal */
    .char-modal{position:fixed;inset:0;background:rgba(2,6,10,0.7);backdrop-filter:blur(6px);opacity:0;visibility:hidden;transition:opacity 320ms cubic-bezier(.22,.9,.29,1),visibility 320ms;z-index:1200}
    .char-modal.open{opacity:1;visibility:visible}
    /* Center modal-inner in the viewport regardless of internal column heights */
    .char-modal .modal-inner{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.98);background:linear-gradient(180deg,rgba(6,10,14,0.9),rgba(6,10,14,0.98));border-radius:14px;max-width:980px;width:calc(100% - 40px);max-height:92vh;overflow:auto;border:1px solid rgba(110,168,161,0.06);box-shadow:0 30px 80px rgba(2,6,10,0.6);opacity:0;transition:transform 420ms cubic-bezier(.22,.9,.29,1),opacity 420ms;z-index:1210}
    .char-modal.open .modal-inner{transform:translate(-50%,-50%) scale(1);opacity:1}
    .modal-grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .modal-image{width:100%;height:100%;max-height:70vh;object-fit:contain;border-radius:10px;background:#071015}
    .modal-image-wrap{overflow:auto;max-height:70vh}
    .modal-image{transition:transform 260ms cubic-bezier(.22,.9,.29,1);transform-origin:top center}
    .modal-image.zoom-level-1{transform:scale(1.6);cursor:zoom-out}
    .modal-image.zoom-level-2{transform:scale(2.4);cursor:zoom-out}
    .modal-side{padding:18px;display:flex;flex-direction:column;gap:12px}
    .modal-side h3{margin:0;color:#e6f6f5}
    .modal-side .meta{color:#9fbfc6;font-size:.95rem}
    .modal-side p{color:#cfe9e6;line-height:1.6}
    .modal-actions{display:flex;gap:8px;margin-top:8px}
    .modal-close{margin-left:auto;padding:8px 12px;border-radius:10px;border:1px solid rgba(143,174,199,0.06);background:transparent;color:#e6f6f5;cursor:pointer}
    .modal-nav-btn{padding:8px 12px;border-radius:10px;border:none;background:#0f3f3b;color:#eaf7f4;cursor:pointer}

    @media (max-width:820px){
      .modal-grid{grid-template-columns:1fr;}
      .modal-side{max-height:40vh;overflow:auto}
      .char-thumb{height:180px}
    }
  </style>
</head>
<body>
  <a class="visually-hidden" href="#main-content">Saltar al contenido</a>

  <nav class="top-nav" role="navigation" aria-label="Navegaci√≥n principal">
    <ul>
      <li><a class="nav-link wind delay-1" href="#bitacora">Bit√°cora / Noticias</a></li>
      <li><a class="nav-link wind delay-2" href="#proyecto">Proyecto</a></li>
      <li><a class="nav-link wind delay-3" href="#comisiones">Comisiones</a></li>
      <li><a class="nav-link wind delay-4" href="#sobre-mi">Sobre m√≠</a></li>
    </ul>
  </nav>

  <header>
    <img src="Ilustraci√≥n El Guardian WEB.webp" alt="Ilustraci√≥n El Guardi√°n de la Gravedad" class="guardian-img" aria-hidden="true" decoding="async" fetchpriority="high" loading="eager" srcset="Ilustraci√≥n El Guardian WEB.webp 1x" sizes="85vw">

    <div class="hero" role="banner">
      <h1 id="main-title">EL GUARDI√ÅN DE LA GRAVEDAD</h1>
      <p id="main-sub" class="tagline">El peso de una RESPONSABILIDAD, frente a los ojos de un DESTINO.</p>

      <div class="count-wrap wind delay-4">
        <div class="count-label">Lanzamiento en:</div>
        <div class="time-group" role="timer" aria-live="polite" aria-atomic="true">
          <div class="time-unit">
            <div class="time-value" id="dias">00</div>
            <div class="time-label">D√≠as</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="horas">00</div>
            <div class="time-label">Horas</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="minutos">00</div>
            <div class="time-label">Minutos</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="segundos">00</div>
            <div class="time-label">Segundos</div>
      </div>
        </div>
      </div>
    </div>
  </header>

  <main id="main-content" role="main">
    <section class="lead reveal">
      <div class="panel">
        <div class="panel-inner">
          <p class="descripcion"><em>El Guardi√°n de la Gravedad</em> es una historieta de ciencia ficci√≥n y fantas√≠a situada en una Argentina dist√≥pica. A trav√©s del viaje en un mundo en conflicto, un pa√≠s y su capital inundada y abandonada, la obra reflexiona sobre el peso del pasado, la memoria y la resistencia emocional.</p>

          <div class="acciones">
            <a href="#proyecto" class="btn secondary">Ingresar al proyecto</a>
            <a href="#bitacora" class="btn secondary">Bit√°cora</a>
          </div>
        </div>
      </div>
    </section>

    <section id="bitacora" class="bitacora reveal" aria-labelledby="bitacora-title">
      <div class="panel">
        <div class="panel-inner">
          <h2 id="bitacora-title" class="bitacora-titulo">Bit√°cora / Noticias</h2>

          <article class="entrada">
            <span class="fecha">12 ¬∑ Marzo ¬∑ 2025</span>
            <h3>La ciudad sumergida</h3>
            <p>Avances sobre el final del Tomo I. La llegada a una Capital Federal inundada implic√≥ repensar el color, el silencio y el peso del paisaje como parte activa del relato.</p>
          </article>

          <article class="entrada">
            <span class="fecha">28 ¬∑ Febrero ¬∑ 2025</span>
            <h3>Decisiones de atm√≥sfera y color</h3>
            <p>La paleta fr√≠a y desaturada aparece como una forma de narrar el agotamiento, pero tambi√©n la persistencia. El espacio y el agua comienzan a dialogar visualmente.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="proyecto" class="reveal" style="padding:40px 20px 80px;">
      <div class="panel">
        <div class="panel-inner">
          <h2 class="proyecto-titulo">El Proyecto: El Guardi√°n de la Gravedad</h2>
          <div style="max-width:760px;margin:16px auto 0;color:#d7e4e2;line-height:1.8;">
            <p><em>El Guardi√°n de la Gravedad</em> es una historieta de ciencia ficci√≥n y fantas√≠a situada en una Argentina dist√≥pica. La obra se construye como un viaje f√≠sico y emocional a trav√©s de territorios colapsados, donde el paisaje, la memoria y el cuerpo se vuelven inseparables. 
              En √©ste proyecto, busco contar mis experiencias personales a trav√©s de una narrativa de fantas√≠a y ciencia ficci√≥n, apelando a memorias, pensamientos, experiencias y sentimientos de mi infancia, adolescencia y tambi√©n, de mi actualidad.</p>
          </div>

          <p style="max-width:760px;margin-top:16px;color:#d7e4e2;line-height:1.8;">A continuaci√≥n, un poco de los elementos que lo constituyen:</p>

          <div id="el-mundo" class="characters-section" aria-labelledby="el-mundo-title">
            <h3 id="el-mundo-title" style="color:#c7e6e2;margin-top:18px">El Mundo</h3>
            <p style="color:#9fbfc6;max-width:760px;margin-top:6px">El mundo volvi√≥ a ser protagonista de la presencia de su 5to Guardi√°n de la Gravedad, su calendario ha vuelto a empezar y con esto, siempre se avecinan sucesos inesperados, en una √©poca mundial actual que no es la... adecuada.</p>

            

            <div style="max-width:760px;margin:12px auto 0;color:#d7e4e2;line-height:1.8;">
              <img src="PersonajesYLugares/F.E.M.S. ARG.webp" alt="F.E.M.S. Argentina" style="width:100%;max-width:760px;border-radius:12px;display:block;margin:0 auto 0;" loading="lazy" decoding="async">
              <div style="height:14px"></div>
              <p style="color:#8faec7;font-size:.95rem;text-align:center;margin:0 0 12px;">Imagen de la sede de Argentina F.E.M.S.</p>
              <p style="color:#9fbfc6;line-height:1.6">La F.E.M.S., o mejor dicho, Las Fuerzas Especiales Mundiales Secretas, son una organizaci√≥n que opera bajo el ojo p√∫blico en pos de defender los intereses humanos frente a amenazas que normalmente son incontrolables. La organizaci√≥n data desde la aparici√≥n del primer Guardi√°n de la Gravedad, o inclusive de antes, nadie lo sabe. Sus intereses concretos son desconocidos pero se sabe que est√°n esparcidos por varios puntos espec√≠ficos alrededor del mundo, suelen tener m√°s conocimientos que incluso los gobiernos m√°s poderosos del mundo. Siempre fueron y son considerados de suma importancia al momento de tratar con "El Guardi√°n de la Gravedad".</p>
            </div>

            <div style="max-width:760px;margin:12px auto 0;color:#d7e4e2;line-height:1.8;">
              <img src="PersonajesYLugares/GRAL PAZ.webp" alt="GRAL PAZ - Ciudad sumergida" style="width:100%;max-width:760px;border-radius:12px;display:block;margin:0 auto 0;" loading="lazy" decoding="async">
              <div style="height:14px"></div>
              <p style="color:#8faec7;font-size:.95rem;text-align:center;margin:0 0 12px;">Imagen tomada sobre la General Paz, Buenos Aires.</p>
              <p style="color:#9fbfc6;line-height:1.6">Tanto Buenos Aires, Capital Federal, como otras provincias del pa√≠s y del mundo en general, se vieron sumamente afectados por la situaci√≥n climatol√≥gica mundial. La escala del cambio clim√°tico arras√≥ con varias ciudades como fueron alguna vez conocidas y las dejaron en la ruina, siendo Capital Federal una de ellas, sumado a un abandono completo por parte de su liderazgo a trav√©s de los a√±os, ahora es una ciudad sumergida y tomada por la naturaleza. El mundo es mucho m√°s hostil y por lo tanto, su supervivencia m√°s compleja siendo una gran combinaci√≥n de elementos y malas decisiones los que cambiaron la situaci√≥n para el ciudadano. El mundo se encuentra en tensiones a lo que parece ser otro gran conflicto, y nuestros protagonistas, har√°n lo que sea con tal de evitar que eso pase.</p>
            </div>
          </div>

          <!-- Characters grid -->
          <div class="characters-section" aria-labelledby="personajes-title">
            <h3 id="personajes-title" style="color:#c7e6e2;margin-top:18px">Personajes</h3>
            <p style="color:#9fbfc6;max-width:760px;margin-top:6px">Haz clic en una ficha para ver la imagen y la ficha completa del personaje.</p>

            <div id="characters-grid" class="characters-grid" role="list" aria-live="polite">
              <!-- JS render: character cards -->
            </div>
          </div>

          <div style="max-width:760px;margin:18px auto 0;color:#d7e4e2;line-height:1.8;text-align:center;">
            <p style="color:#c7e6e2;font-weight:700;margin-bottom:6px">√âste mundo y sus personajes te esperan para que descubras sus secretos, sucesos, poderes y dem√°s en "El Guardi√°n de la Gravedad", te espera todo ah√≠, hasta entonces!</p>
          </div>

          <!-- Character modal (single shared overlay) -->
          <div id="char-modal" class="char-modal" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="modal-inner" role="document">
              <div style="display:flex;align-items:flex-start;justify-content:flex-end;padding:12px 18px 0 18px">
                <div class="modal-actions" aria-hidden="true">
                  <button class="modal-nav-btn" id="zoom-char" title="Zoom">üîç</button>
                  <button class="modal-nav-btn" id="prev-char" title="Anterior">‚óÄ</button>
                  <button class="modal-nav-btn" id="next-char" title="Siguiente">‚ñ∂</button>
                </div>
                <button class="modal-close" id="close-char" aria-label="Cerrar">Cerrar ‚úï</button>
              </div>
              <div class="modal-grid" style="padding:8px 18px 20px 18px">
                <div class="modal-image-wrap">
                  <img id="modal-image" class="modal-image" src="" alt="">
                </div>
                <aside class="modal-side">
                  <h3 id="modal-name">Nombre personaje</h3>
                  <div class="meta" id="modal-role">Rol / Alias</div>
                  <p id="modal-short">Descripci√≥n breve del personaje.</p>
                  <p id="modal-bio">Biograf√≠a ampliada. Aqu√≠ aparecer√° el texto con m√°s detalle sobre el personaje, su historia, motivaciones y relaci√≥n con el proyecto.</p>
                  <div id="modal-data" style="color:#9fbfc6;font-size:.95rem"></div>
                </aside>
              </div>
            </div>
          </div>

        </div>
      </div>
      
    </section>

    <section id="comisiones" class="reveal" style="padding:40px 20px 80px;">
      <div class="panel">
        <div class="panel-inner">
          <h2 class="comisiones-titulo">Comisiones</h2>
          <p class="comisiones-intro">Realizo trabajos por encargo vinculados a la ilustraci√≥n, el dibujo narrativo y el dise√±o de personajes. Cada pedido se trabaja de manera personalizada, respetando tiempos, procesos y acuerdos previos.</p>

          <div class="comisiones-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:40px;max-width:900px;margin:24px auto;">
            <div class="comision"><h3>Ilustraci√≥n</h3><p>Ilustraciones originales en t√©cnica digital o tradicional.</p></div>
            <div class="comision"><h3>Dibujo narrativo</h3><p>Vi√±etas, p√°ginas o escenas con enfoque secuencial.</p></div>
            <div class="comision"><h3>Personajes</h3><p>Dise√±o y desarrollo de personajes.</p></div>
          </div>

          <form class="formulario-comisiones" action="https://formspree.io/f/maqwlbqw" method="POST" aria-label="Formulario de comisiones">
            <div class="campo"><label for="nombre">Nombre y apellido</label><input type="text" id="nombre" name="nombre" required></div>
            <div class="campo"><label for="email">E-mail</label><input type="email" id="email" name="email" required></div>
            <div class="campo"><label for="mensaje">Descripci√≥n del pedido</label><textarea id="mensaje" name="mensaje" rows="5" required></textarea></div>
            <input type="hidden" name="_subject" value="Nueva consulta de comisi√≥n">
            <button type="submit" class="btn">Enviar consulta</button>
          </form>
        </div>
      </div>
    </section>

    <section id="sobre-mi" class="reveal" style="padding:40px 20px 80px;">
      <div class="panel">
        <div class="panel-inner">
          <h2 class="sobre-mi-titulo">Sobre m√≠</h2>
          <div style="max-width:720px;margin:0 auto;color:#d7e4e2;line-height:1.8;">
            <p>Soy Mateo Castellano, artista visual y estudiante de la Licenciatura en Artes Visuales. Mi trabajo se centra en la historieta, el dibujo narrativo y la construcci√≥n de mundos como forma de reflexi√≥n sobre la memoria, el territorio y la responsabilidad individual.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer style="padding:60px 20px;text-align:center;color:#8faec7;">
    Mateo Castellano ‚Äî Licenciatura en Artes Visuales<br>
    Contacto: <a href="mailto:mateocastellano01@gmail.com" style="color:inherit;text-decoration:underline;">mateocastellano01@gmail.com</a><br>
    Instagram: <a href="https://instagram.com/mat.bitacora.alien" target="_blank" rel="noopener noreferrer" style="color:#6ea8a1;text-decoration:none;font-weight:700;transition:color 200ms;">@mat.bitacora.alien</a><br>
    -2026-
  </footer>

  <button class="mute-btn muted" id="mute-btn" aria-label="Activar sonido" title="Silenciar/Activar sonido">üîá</button>
  <button class="bg-reset-btn" id="bg-reset" aria-label="Ir al inicio">Ir al inicio</button>

  <script>
    (function(){
      // Sound system with Web Audio API
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      const audioCtx = new AudioContext();
      let isMuted = true; // Start muted by default
      let volumeMultiplier = 1; // Dynamic volume based on scroll

      function playFlipSound(){
        if(isMuted) return;
        try{
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          
          osc.connect(gain);
          gain.connect(audioCtx.destination);
          
          // Epic mechanical flip sound
          osc.type = 'sine';
          osc.frequency.setValueAtTime(320, audioCtx.currentTime);
          osc.frequency.exponentialRampToValueAtTime(180, audioCtx.currentTime + 0.08);
          
          const baseVolume = 0.35;
          const dynamicVolume = Math.max(0.01, baseVolume * volumeMultiplier);
          gain.gain.setValueAtTime(dynamicVolume, audioCtx.currentTime);
          gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.08);
          
          osc.start(audioCtx.currentTime);
          osc.stop(audioCtx.currentTime + 0.08);
        } catch(e){ console.log('Audio error:', e); }
      }

      // Mute button control
      const muteBtn = document.getElementById('mute-btn');
      muteBtn.addEventListener('click', () => {
        isMuted = !isMuted;
        muteBtn.textContent = isMuted ? 'üîá' : 'üîä';
        muteBtn.classList.toggle('muted', isMuted);
        muteBtn.setAttribute('aria-label', isMuted ? 'Activar sonido' : 'Silenciar sonido');
      });

      // Smooth scroll with header offset
      const nav = document.querySelector('.top-nav');
      const navHeight = () => nav ? nav.getBoundingClientRect().height : 0;
      document.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener('click', function(e){
          const href = this.getAttribute('href');
          if(!href || href === '#') return;
          const target = document.querySelector(href);
          if(target){ e.preventDefault(); const top = target.getBoundingClientRect().top + window.pageYOffset - navHeight() - 12; window.scrollTo({top,behavior:'smooth'}); }
        });
      });

      // Reveal on scroll
      const reveals = document.querySelectorAll('.reveal');
      const io = new IntersectionObserver((entries,observer) => {
        entries.forEach(en => { if(en.isIntersecting){ en.target.classList.add('is-visible'); observer.unobserve(en.target); }});
      }, {threshold:0.12});
      reveals.forEach(r => io.observe(r));
      // Fallback: if for any reason IntersectionObserver didn't run or elements weren't observed,
      // ensure reveals become visible shortly after load so content is readable.
      setTimeout(()=>{
        const pending = document.querySelectorAll('.reveal:not(.is-visible)');
        if(pending.length){
          pending.forEach(el => el.classList.add('is-visible'));
        }
      }, 700);

      // Split title/subtitle into letters for animation
      function splitLetters(selector){
        const el = document.querySelector(selector);
        if(!el) return;
        const txt = el.textContent || '';
        el.innerHTML = '';
        Array.from(txt).forEach((ch,i) => {
          const sp = document.createElement('span');
          sp.className = 'letter';
          sp.textContent = (ch === ' ' ? '\u00A0' : ch);
          // set per-letter delay (JS-controlled)
          sp.style.animationDelay = `${i * 90}ms`;
          el.appendChild(sp);
        });
      }
      splitLetters('#main-title');
      splitLetters('#main-sub');

      // run wind sequence: animate nav links (stagger), hero blocks and trigger letter animations
      function runWindSequence(){
        if(windStarted) return;
        windStarted = true;
        // nav links
        const navLinks = document.querySelectorAll('.top-nav .nav-link');
        navLinks.forEach((a,i) => {
          a.classList.add('wind');
          a.style.animationDelay = `${140 + i * 160}ms`;
          void a.offsetWidth;
          a.classList.add('animate');
        });

        // hero elements (title, subtitle, counter)
        const heroEls = [];
        const titleEl = document.getElementById('main-title');
        const subEl = document.getElementById('main-sub');
        const counterWrap = document.querySelector('.count-wrap');
        if(titleEl) { titleEl.classList.add('wind'); titleEl.classList.add('delay-1'); heroEls.push(titleEl); }
        if(subEl) { subEl.classList.add('wind'); subEl.classList.add('delay-2'); heroEls.push(subEl); }
        if(counterWrap) { counterWrap.classList.add('wind'); counterWrap.classList.add('delay-4'); heroEls.push(counterWrap); }

        heroEls.forEach(el => { void el.offsetWidth; el.classList.add('animate'); });

        // trigger letter animations by setting data-animate true (letters already have per-letter animationDelay inline)
        document.querySelectorAll('.letter').forEach(span => span.setAttribute('data-animate','true'));
      }

      // We'll start the epic image animation first and then trigger the "wind" sequence
      // when the image animation finishes. Guard to ensure wind runs only once.
      let windStarted = false;

      // header show/hide on scroll
      let lastScroll = window.pageYOffset, ticking=false;
      window.addEventListener('scroll', () => {
        if(!ticking){
          window.requestAnimationFrame(()=> {
            const current = window.pageYOffset;
            
            // Calculate volume based on scroll (100% at top, decreases as you scroll down)
            // Volume reaches minimum (10%) at 2000px scroll
            volumeMultiplier = Math.max(0.1, 1 - (current / 2000));
            
            if(current > lastScroll && current > 80) nav.classList.add('hidden'); else nav.classList.remove('hidden');
            lastScroll = current; ticking=false;
          });
          ticking=true;
        }
      }, {passive:true});

      // Countdown logic (smooth flip)
      const lanzamiento = new Date('March 20, 2026 00:00:00').getTime();
      const diasEl = document.getElementById('dias'), horasEl = document.getElementById('horas'), minutosEl = document.getElementById('minutos'), segundosEl = document.getElementById('segundos');

      function setAndFlip(el, value){
        if(!el) return;
        if(el.textContent !== value){
          playFlipSound();
          el.classList.add('is-flipping');
          setTimeout(()=> { el.textContent = value; setTimeout(()=> el.classList.remove('is-flipping'),760); }, 160);
        } else el.textContent = value;
      }

      function updateCounter(){
        const now = Date.now(); let diff = lanzamiento - now;
        if(diff <= 0){ setAndFlip(diasEl,'00'); setAndFlip(horasEl,'00'); setAndFlip(minutosEl,'00'); setAndFlip(segundosEl,'00'); clearInterval(interval); return; }
        const dias = Math.floor(diff / (1000*60*60*24)); diff -= dias*(1000*60*60*24);
        const horas = Math.floor(diff / (1000*60*60)); diff -= horas*(1000*60*60);
        const minutos = Math.floor(diff / (1000*60)); diff -= minutos*(1000*60);
        const segundos = Math.floor(diff / 1000);
        setAndFlip(diasEl,String(dias).padStart(2,'0'));
        setAndFlip(horasEl,String(horas).padStart(2,'0'));
        setAndFlip(minutosEl,String(minutos).padStart(2,'0'));
        setAndFlip(segundosEl,String(segundos).padStart(2,'0'));
      }
      updateCounter();
      const interval = setInterval(updateCounter,1000);

      // Determine when initial wind/letter animations complete.
      // Letters: last letter delay = (count-1)*90ms + duration 1200ms
      const letters = document.querySelectorAll('.letter');
      const lastLetterDelay = letters.length ? ((letters.length - 1) * 90) + 1200 : 0;
      // Nav / hero wind sequence was staggered up to ~140 + i*160 and hero durations 1200ms
      const navMax = 140 + (document.querySelectorAll('.top-nav .nav-link').length * 160) + 1200;
      const safety = 300; // small buffer
      const when = Math.max(lastLetterDelay, navMax) + safety;

      // Start epic animation as soon as DOM is ready; runWindSequence will be called
      // when the guardian image's animation ends.
      function startEpicBg(){
        const guardian = document.querySelector('.guardian-img');
        if(!guardian) { if(!windStarted) { runWindSequence(); } return; }
        if(guardian.classList.contains('img-epic')) return;
        guardian.classList.add('img-epic');
        const onEnd = () => { guardian.removeEventListener('animationend', onEnd); if(!windStarted) runWindSequence(); };
        guardian.addEventListener('animationend', onEnd);
      }

      if(document.readyState === 'complete' || document.readyState === 'interactive') startEpicBg();
      else window.addEventListener('DOMContentLoaded', startEpicBg);

      // 'Ir al inicio' button: show on scroll down with fade-in
      const resetBtn = document.getElementById('bg-reset');
      
      // Show/hide buttons based on scroll position
      window.addEventListener('scroll', () => {
        if(window.pageYOffset > 300){
          resetBtn.classList.add('show');
          muteBtn.classList.add('moved-up');
        } else {
          resetBtn.classList.remove('show');
          muteBtn.classList.remove('moved-up');
        }
      }, {passive:true});

      resetBtn.addEventListener('click', (e)=>{
        const guardian = document.querySelector('.guardian-img');
        if(guardian){
          guardian.classList.remove('img-epic');
          void guardian.offsetWidth;
          guardian.classList.add('img-epic');
          if(!windStarted){
            const onEnd = () => { guardian.removeEventListener('animationend', onEnd); if(!windStarted) runWindSequence(); };
            guardian.addEventListener('animationend', onEnd);
          }
        } else {
          if(!windStarted) runWindSequence();
        }
        window.scrollTo({top:0,behavior:'smooth'});
      });

    })();
  </script>

  <script>
    (function(){
      const characters = [
        { id:'guardian', name:'Hima', role:'El actual Guardi√°n de la Gravedad', short:'Ni√±o nacido de la Luna, destinado a ser el nuevo Guardi√°n de la Gravedad.', bio:'Nacido con el deber de portar una gran responsabilidad, Hima, es el contendiente a regular la gravedad del planeta entero, cuidado por la F.E.M.S., mientras descubre su pasado, construye su futuro e identifica su presente.', thumb:'PersonajesYLugares/HIMA.webp', image:'PersonajesYLugares/HIMA.webp', alt:'Retrato de Hima', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> 10 a√±os</li><li><strong>Nacionalidad:</strong> Argentino</li><li><strong>Raza:</strong> Humano</li><li><strong>Altura:</strong> 1,40 m</li><li><strong>Comida favorita:</strong> Milanesa con pur√©</li><li><strong>Habilidades:</strong> Control Gravitacional</li><li><strong>Afilaci√≥n:</strong> F.E.M.S.</li></ul>` },
        { id:'lurin', name:'Lurin', role:'Portadora de la 5ta Voz Solar', short:'Ni√±a nacida del Sol, destinada a continuar el legado de las portadoras de la Voz Solar.', bio:'Nacida 5 minutos despu√©s de su hermano, Lurin naci√≥ del sol con un inmenso poder y continuando un legado que no se ve seguido, Las Portadoras de la Voz Solar. Criada junto a su hermano por la F.E.M.S., Lurin buscar√° descubrir su pasado y encontrar el l√≠mite de sus capacidades.', thumb:'PersonajesYLugares/LURIN.webp', image:'PersonajesYLugares/LURIN.webp', alt:'Lurin con br√∫jula y mapa h√∫medo', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> 10 a√±os</li><li><strong>Nacionalidad:</strong> Argentina</li><li><strong>Raza:</strong> Humana</li><li><strong>Altura:</strong> 1,30 m</li><li><strong>Comida favorita:</strong> Helado</li><li><strong>Afilaci√≥n:</strong> F.E.M.S.</li><li><strong>Habilidades:</strong> Control de la energ√≠a y leve control de la materia</li></ul>` },
        { id:'bob', name:'BoB', role:'L√≠der del escuadr√≥n especial F.E.M.S.', short:'Caputiano enviado a la Tierra como embajador espacial.', bio:'BoB, el actual L√≠der del Escuadr√≥n Especial de la F.E.M.S. en Argentina, es un Caputiano enviado con el fin de crear lazos entre ambas razas. Posteriormente se unir√≠a en la creaci√≥n de la F.E.M.S. y nadie sabe realmente cu√°nto tiempo lleva en la Tierra. Amistoso y buen l√≠der, ama el caf√©.', thumb:'PersonajesYLugares/BOB.webp', image:'PersonajesYLugares/BOB.webp', alt:'Retrato de BoB con gorra y cicatrices', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> ???</li><li><strong>Nacionalidad:</strong> Argentino</li><li><strong>Raza:</strong> Caputiano</li><li><strong>Altura:</strong> 1,90 m</li><li><strong>Comida favorita:</strong> El Caf√©</li><li><strong>Afilaci√≥n:</strong> F.E.M.S.</li><li><strong>Habilidades:</strong> Habilidades telequin√©ticas, control de la materia y poseedor de un Orbe Negro</li></ul>` },
        { id:'gresh', name:'Gresh', role:'Entrenador del escuadr√≥n especial F.E.M.S.', short:'Fuerza y Potencia. Definiciones que se quedan cortas, frente a la joya capacitadora de la F.E.M.S.', bio:'Gresh, un metahumano con altas capacidades en fuerza bruta, conocimiento en rituales y artilugios m√°gicos. Desde muy joven fue parte de la F.E.M.S., con un pasado un poco retorcido y descuidado, Gresh intentar√° enmendar sus errores en pos de encontra la paz con su propio destino.', thumb:'GRESH.webp', image:'GRESH.webp', alt:'Retrato de Gresh', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> 34 a√±os</li><li><strong>Nacionalidad:</strong> Argentino</li><li><strong>Raza:</strong> Humano/Metahumano</li><li><strong>Altura:</strong> 2 m</li><li><strong>Comida favorita:</strong> Asado</li><li><strong>Afiliaci√≥n:</strong> F.E.M.S.</li><li><strong>Habilidades:</strong> Manipulaci√≥n energ√©tica, Fuerza sobrehumana y poseedor del Collar Sagrado</li></ul>` },
        { id:'rion', name:'Rion', role:'Sub-jefa del escuadron especial F.E.M.S.', short:'Fr√≠a pero con un alma c√°lida, Rion, es la sub-jefa del escuadr√≥n especial de la F.E.M.S.', bio:'Manipuladora experta en la materializaci√≥n de energ√≠a, ella es la encargada de dirigir las misiones del grupo y guiarlos en sus objetivos. Con un pasado compartido con Gresh, ella har√° lo imposible para no equivocarse y proteger a sus seres queridos... incluso aunque eso signifique arriesgar su propia vida.', thumb:'RION.webp', image:'RION.webp', alt:'Retrato de Rion', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> 35 a√±os</li><li><strong>Nacionalidad:</strong> Argentina</li><li><strong>Raza:</strong> Humana</li><li><strong>Altura:</strong> 1,60 m</li><li><strong>Comida favorita:</strong> Sushi</li><li><strong>Afiliaci√≥n:</strong> F.E.M.S.</li><li><strong>Habilidades:</strong> Experta materializaci√≥n de energ√≠a y Artes Marciales combinadas</li></ul>` },
        { id:'gueff', name:'Gueff', role:'L√≠der de la F.E.M.S. Argentina', short:'Experimento antiguo, Gueff siempre mostr√≥ altas capacidades para el liderazgo, hoy encabezando la rama central de la F.E.M.S. en Argentina.', bio:'Aunque su apariencia enga√±e la vista, Gueff posee completo acceso a los secretos mejor guardados de la F.E.M.S., siendo √©ste de suma importancia para la organizaci√≥n. Fue el encargado de la recepci√≥n del actual Guardi√°n de la Gravedad. Hoy en d√≠a, se desconoce lo que est√° haciendo pero para algo, se est√° preparando...', thumb:'GUEFF.webp', image:'GUEFF.webp', alt:'Retrato de Gueff', data:`<ul style="padding-left:18px;margin:8px 0;color:#9fbfc6"><li><strong>Edad:</strong> ???</li><li><strong>Nacionalidad:</strong> Argentino</li><li><strong>Raza:</strong> H√≠brido</li><li><strong>Altura:</strong> 1,30 m</li><li><strong>Comida favorita:</strong> Pollo al disco</li><li><strong>Afiliaci√≥n:</strong> F.E.M.S.</li><li><strong>Habilidades:</strong> Teleportaci√≥n de objetos a larga distancia y leve control telequin√©tico</li></ul>` }
      ];

      // Ensure image paths point to the moved folder
      characters.forEach(c => {
        if(c.thumb && !c.thumb.startsWith('PersonajesYLugares/')) c.thumb = 'PersonajesYLugares/' + c.thumb;
        if(c.image && !c.image.startsWith('PersonajesYLugares/')) c.image = 'PersonajesYLugares/' + c.image;
      });

      // Definiciones expl√≠citas permanentes para personajes recientemente a√±adidos
      const _forcePaths = {
        gresh: 'PersonajesYLugares/GRESH.webp',
        rion:  'PersonajesYLugares/RION.webp',
        gueff: 'PersonajesYLugares/GUEFF.webp'
      };
      characters.forEach(c => {
        if(_forcePaths[c.id]){
          c.thumb = _forcePaths[c.id];
          c.image = _forcePaths[c.id];
        }
      });

      const grid = document.getElementById('characters-grid');
      const modal = document.getElementById('char-modal');
      const modalImage = document.getElementById('modal-image');
      const modalName = document.getElementById('modal-name');
      const modalRole = document.getElementById('modal-role');
      const modalShort = document.getElementById('modal-short');
      const modalBio = document.getElementById('modal-bio');
      const modalData = document.getElementById('modal-data');
      const closeBtn = document.getElementById('close-char');
      const prevBtn = document.getElementById('prev-char');
      const nextBtn = document.getElementById('next-char');
      const zoomBtn = document.getElementById('zoom-char');

      let currentIndex = 0;
      let prevFocused = null;

      function renderGrid(){
        if(!grid) return;
        grid.innerHTML = '';
        characters.forEach((c, idx) => {
          const btn = document.createElement('button');
          btn.type='button'; btn.className='char-card'; btn.setAttribute('data-index', idx);
          const wrap = document.createElement('div'); wrap.className='thumb-wrap';
          const img = document.createElement('img'); img.className = 'char-thumb' + ((c.id==='bob'||c.id==='rion') ? ' shift-top' : ''); img.src = c.thumb; img.alt = c.alt || c.name; img.loading='lazy'; img.decoding='async';
          wrap.appendChild(img);
          const overlay = document.createElement('div'); overlay.className='char-overlay'; overlay.textContent = c.name; wrap.appendChild(overlay);
          btn.appendChild(wrap);
          const meta = document.createElement('div'); meta.className='char-meta'; const inner = document.createElement('div'); const n = document.createElement('div'); n.className='char-name'; n.textContent = c.name; const r = document.createElement('div'); r.className='char-role'; r.textContent = c.role; inner.appendChild(n); inner.appendChild(r); meta.appendChild(inner); btn.appendChild(meta);
          btn.addEventListener('click', ()=> openModal(idx));
          grid.appendChild(btn);
        });
      }

      function openModal(i){
        currentIndex = i; const c = characters[i]; if(!c) return;
        prevFocused = document.activeElement;
        modalImage.src = c.image; modalImage.alt = c.alt || c.name; modalName.textContent = c.name; modalRole.textContent = c.role; modalShort.textContent = c.short; modalBio.textContent = c.bio; modalData.innerHTML = c.data || '';
        modal.setAttribute('aria-hidden','false'); modal.classList.add('open');
        try{ closeBtn.focus({preventScroll:true}); }catch(e){ closeBtn.focus(); }
      }

      function closeModal(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); modalImage.src=''; if(prevFocused && prevFocused.focus) prevFocused.focus(); }

      function showNext(dir){ const next = (currentIndex + dir + characters.length) % characters.length; openModal(next); }

      function toggleZoom(){ if(!modalImage) return; if(modalImage.classList.contains('zoom-level-2')){ modalImage.classList.remove('zoom-level-2'); modalImage.classList.remove('zoom-level-1'); zoomBtn.textContent='üîç'; } else if(modalImage.classList.contains('zoom-level-1')){ modalImage.classList.remove('zoom-level-1'); modalImage.classList.add('zoom-level-2'); zoomBtn.textContent='üîé'; } else { modalImage.classList.add('zoom-level-1'); zoomBtn.textContent='üîé'; } const wrap = modalImage.parentElement; if(wrap) wrap.style.overflow = (modalImage.classList.contains('zoom-level-1')||modalImage.classList.contains('zoom-level-2')) ? 'auto' : 'hidden'; }

      modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
      closeBtn.addEventListener('click', closeModal);
      prevBtn.addEventListener('click', ()=> showNext(-1));
      nextBtn.addEventListener('click', ()=> showNext(1));
      zoomBtn.addEventListener('click', toggleZoom);
      modalImage.addEventListener('dblclick', toggleZoom);
      document.addEventListener('keydown', (e)=>{
        if(modal.classList.contains('open')){
          if(e.key==='Escape') closeModal();
          if(e.key==='ArrowRight') showNext(1);
          if(e.key==='ArrowLeft') showNext(-1);
          if(e.key==='Tab'){
            const focusables = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
            const foc = Array.prototype.slice.call(focusables).filter(el => !el.hasAttribute('disabled'));
            if(foc.length===0){ e.preventDefault(); return; }
            const first=foc[0], last=foc[foc.length-1]; if(e.shiftKey){ if(document.activeElement===first){ last.focus(); e.preventDefault(); } } else { if(document.activeElement===last){ first.focus(); e.preventDefault(); } }
          }
        }
      });

      renderGrid();
      window.ElGuardian = window.ElGuardian || {}; window.ElGuardian.addCharacter = function(obj){ characters.push(obj); renderGrid(); };
    })();
  </script>
</body>
</html>